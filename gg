spawn(function()
	while task.wait() do
		pcall(function()
			for i, v in pairs(workspace.Interactable.Farm:GetChildren()) do
				local uncollectable = v:FindFirstChild("UnCollectable")
				
				if uncollectable then
					-- ถ้าพบว่า Transparency == 1 ให้ทำการปลูกต้นไม้
					if uncollectable.Transparency == 1 and (game:GetService("Players").LocalPlayer.Character:FindFirstChild("Seeds Bag") or game:GetService("Players").LocalPlayer.Backpack:FindFirstChild("Seeds Bag")) then
						game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = uncollectable.CFrame
						task.wait(1)
						game:GetService("VirtualInputManager"):SendKeyEvent(true, "E", false, game)
						
						-- รอจนกว่าการปลูกเสร็จสมบูรณ์ (Transparency == 0)
						repeat
							task.wait(0.5)
						until uncollectable.Transparency == 0
					end

					-- ถ้า Transparency == 0 ให้ทำการรดน้ำต้นไม้
					if uncollectable.Transparency == 0 and (game:GetService("Players").LocalPlayer.Character:FindFirstChild("Watering vegetables") or game:GetService("Players").LocalPlayer.Backpack:FindFirstChild("Watering vegetables")) then
						game.Players.LocalPlayer.Character.Humanoid:EquipTool("Watering vegetables")
						game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = uncollectable.CFrame
						task.wait(1)
						game:GetService("VirtualInputManager"):SendKeyEvent(true, "E", false, game)
					end
				end
			end
			
			-- เติมน้ำถ้าไม่มีน้ำ
			if not (game:GetService("Players").LocalPlayer.Character:FindFirstChild("Watering vegetables") or game:GetService("Players").LocalPlayer.Backpack:FindFirstChild("Watering vegetables")) then
				game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-1117.89697265625, 20.104951858520508, 2999.314208984375)
				task.wait(1)
				game:GetService("VirtualInputManager"):SendKeyEvent(true, "E", false, game)
			end

			-- เติมเมล็ดพันธุ์ถ้าไม่มี
			if not (game:GetService("Players").LocalPlayer.Character:FindFirstChild("Seeds Bag") or game:GetService("Players").LocalPlayer.Backpack:FindFirstChild("Seeds Bag")) then
				game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-928.5620727539062, 20.104961395263672, 3023.774169921875)
				task.wait(1)
				game:GetService("VirtualInputManager"):SendKeyEvent(true, "E", false, game)
			end
		end)
	end
end)
